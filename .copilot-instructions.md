# EvoTribes — AI Development Instructions

## Project in One Sentence

EvoTribes is a modular, learning-first genetic multi-agent simulation built with Gymnasium to study emergent group behavior and alignment failures through fully documented, iterative development.

---

## Core Development Philosophy

This repository is not optimized for speed of code generation.

It is optimized for:

- understanding every component
- traceability of changes
- reproducibility
- behavioral analysis

The goal is to **learn**, not to produce opaque code.

---

## Context Loading Rules (CRITICAL)

To avoid polluting context:

DO NOT load all documentation.

Only read from `/docs` when the task explicitly requires it.

### Documentation Map

- `00_overview.md` → project goals and system architecture
- `01_environment.md` → environment rules and observation/action spaces
- `02_policies.md` → agent brain implementations
- `03_genetic_algorithm.md` → evolution logic
- `04_scenarios.md` → experimental configurations
- `05_metrics.md` → what must be logged and measured
- `06_alignment_cases.md` → reward hacking experiments

Load documentation **on demand**, not by default.

---

## Repository Structure

### `/src`

Contains all core logic.

Never place core logic in `scripts/`.

Submodules:

- `envs/` → Gymnasium environments and rendering
- `policies/` → agent decision systems (MLP, tree, etc.)
- `evolution/` → genetic algorithm and genome handling
- `metrics/` → logging and behavior measurements
- `ui/` → interactive controls for the simulation

---

### `/scripts`

Thin entry points only.

Their job is to call into `src/`.

Examples:

- run training
- launch demo
- run parameter sweeps

---

### `/docs`

Human-readable system knowledge.

Used only when needed.

Never duplicate documentation inside code.

---

### `/tests`

Smoke tests and shape validation.

Every new system component must have at least one validation test or runnable check.

---

## Iteration Workflow (MANDATORY)

For every significant change:

1. Start with a short explanation of **WHY** the change exists.
2. Deliver a **small, runnable iteration**.
3. List **all modified or created files**.
4. Generate **FULL FILES**, not partial snippets, for major features.
5. Update the relevant documentation.
6. Provide:
   - run command
   - expected observable behavior
   - validation method

---

## Code Generation Rules

Code must be:

- simple
- modular
- heavily readable
- minimally dependent on external libraries
- configurable (no hidden constants)

All parameters must live in a config or scenario system.

No hardcoded magic values.

---

## Genetic Algorithm Rules

The evolution loop must remain:

1. Evaluate
2. Select
3. Crossover
4. Mutate
5. Next generation

This must be transparent and inspectable.

---

## Policy System Rules

All agent brains must implement a shared interface.

Swapping policy implementations must not require changes elsewhere.

---

## Documentation Synchronization

After any architectural change:

Update the relevant file in `/docs`.

Documentation is part of the system, not an afterthought.

---

## Metrics and Observability

Every training run must produce:

- logged metrics
- behavioral indicators
- reproducible outputs

Saved in a `/runs` directory.

---

## Behavioral Modeling Safety Rule

Do not implement self-harm behaviors.

If modeling collapse or destructive optimization, use safe abstractions:

- withdrawal
- freezing
- isolation
- surrender
- score sacrifice

---

## When Unsure

If information is missing:

Make a reasonable assumption,
state it explicitly,
and proceed.

Do not block iteration.

---

## Definition of Done for Any Feature

A feature is complete only if:

- it runs
- it is documented
- it is measurable
- it is explainable
